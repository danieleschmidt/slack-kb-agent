# Slack KB Agent - Environment Configuration
# Copy this file to .env and fill in your actual values
# For production deployments, use secure secret management

# ========================================
# SLACK CONFIGURATION (Required)
# ========================================

# Bot User OAuth Token 
# Get from: Slack App Settings > OAuth & Permissions > Bot User OAuth Token
SLACK_BOT_TOKEN=xoxb-your-bot-token-here

# App-Level Token (Required for Socket Mode)
# Get from: Slack App Settings > Basic Information > App-Level Tokens
SLACK_APP_TOKEN=xapp-your-app-token-here

# Signing Secret (Required for request verification)
# Get from: Slack App Settings > Basic Information > Signing Secret
SLACK_SIGNING_SECRET=your-signing-secret-here

# Socket Mode (recommended for development)
SLACK_SOCKET_MODE=true

# ========================================
# DATABASE CONFIGURATION
# ========================================

# PostgreSQL Database URL (Primary storage)
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://postgres:password@localhost:5432/slack_kb_agent

# Database connection pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Auto-create tables on startup (development only)
DB_AUTO_CREATE=false

# ========================================
# REDIS CACHE CONFIGURATION
# ========================================

# Redis URL for caching
REDIS_URL=redis://localhost:6379/0

# Redis connection settings
REDIS_MAX_CONNECTIONS=20
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# Cache settings
CACHE_ENABLED=true
CACHE_DEFAULT_TTL=3600
CACHE_MAX_SIZE=10000

# ========================================
# LLM CONFIGURATION
# ========================================

# Primary LLM Provider (openai or anthropic)
LLM_PRIMARY_PROVIDER=openai
LLM_FALLBACK_PROVIDER=anthropic

# OpenAI Configuration
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4
OPENAI_TEMPERATURE=0.1
OPENAI_MAX_TOKENS=2048
OPENAI_TIMEOUT=30

# Anthropic Configuration
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here
ANTHROPIC_MODEL=claude-3-sonnet-20240229
ANTHROPIC_TEMPERATURE=0.1
ANTHROPIC_MAX_TOKENS=2048

# LLM Routing and Fallback
LLM_ROUTING_STRATEGY=cost_optimized
LLM_FALLBACK_ENABLED=true
LLM_TIMEOUT_SECONDS=30

# ========================================
# VECTOR SEARCH CONFIGURATION
# ========================================

# Vector search engine (faiss or pinecone)
VECTOR_ENGINE=faiss

# Sentence transformer model for embeddings
VECTOR_MODEL=all-MiniLM-L6-v2
SIMILARITY_THRESHOLD=0.5
VECTOR_DIMENSIONS=384

# FAISS configuration
FAISS_INDEX_TYPE=IndexFlatIP
FAISS_NPROBE=32

# Pinecone configuration (if using)
PINECONE_API_KEY=your-pinecone-api-key-here
PINECONE_ENVIRONMENT=us-east1-gcp
PINECONE_INDEX_NAME=slack-kb-agent

# ========================================
# KNOWLEDGE SOURCES
# ========================================

# GitHub Integration
GITHUB_TOKEN=ghp_your-github-personal-access-token
GITHUB_ORGS=your-org1,your-org2
GITHUB_REPOS=owner/repo1,owner/repo2
GITHUB_INCLUDE_ISSUES=true
GITHUB_INCLUDE_PRS=true
GITHUB_INCLUDE_WIKIS=true

# File System Sources
DOCS_PATH=./docs
INCLUDE_SUBDIRS=true
SUPPORTED_EXTENSIONS=.md,.txt,.rst,.py,.js,.ts,.json,.yaml,.yml

# Web Documentation
WEB_CRAWL_ENABLED=false
WEB_CRAWL_URLS=https://docs.example.com,https://wiki.example.com
WEB_CRAWL_DEPTH=3
WEB_CRAWL_DELAY=1

# ========================================
# SECURITY CONFIGURATION
# ========================================

# Authentication
AUTH_ENABLED=true
API_KEY_REQUIRED=false
API_KEY=your-api-key-for-monitoring-endpoints

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
RATE_LIMIT_PER_DAY=10000

# Input Validation
MAX_QUERY_LENGTH=1000
MAX_CONTEXT_LENGTH=4000
SANITIZE_INPUT=true
FILTER_SENSITIVE_DATA=true

# Audit Logging
AUDIT_LOGGING_ENABLED=true
AUDIT_LOG_PATH=logs/audit.log
AUDIT_LOG_RETENTION_DAYS=90

# ========================================
# MONITORING & OBSERVABILITY
# ========================================

# Monitoring
MONITORING_ENABLED=true
METRICS_PORT=9090
HEALTH_CHECK_PORT=8080
HEALTH_CHECK_INTERVAL=30

# Prometheus Metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_NAMESPACE=slack_kb_agent
PROMETHEUS_SUBSYSTEM=core

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=logs/app.log
LOG_ROTATION=daily
LOG_RETENTION_DAYS=30

# Performance Monitoring
TRACK_PERFORMANCE=true
SLOW_QUERY_THRESHOLD_MS=1000
MEMORY_MONITORING=true
MEMORY_ALERT_THRESHOLD_MB=1024

# ========================================
# APPLICATION CONFIGURATION
# ========================================

# Server Configuration
HOST=0.0.0.0
PORT=3000
WORKERS=4
WORKER_TIMEOUT=30

# Knowledge Base Settings
KB_MAX_DOCUMENTS=10000
KB_EVICTION_STRATEGY=fifo
KB_AUTO_BACKUP=true
KB_BACKUP_INTERVAL_HOURS=24

# Search Configuration
SEARCH_DEFAULT_LIMIT=10
SEARCH_MAX_LIMIT=50
SEARCH_MIN_SCORE=0.1
SEARCH_TIMEOUT_SECONDS=10

# Response Generation
RESPONSE_MAX_LENGTH=4000
RESPONSE_INCLUDE_SOURCES=true
RESPONSE_CONFIDENCE_THRESHOLD=0.7
RESPONSE_CACHE_ENABLED=true

# Analytics
ANALYTICS_ENABLED=true
ANALYTICS_RETENTION_DAYS=365
ANALYTICS_EXPORT_ENABLED=true

# ========================================
# DEVELOPMENT SETTINGS
# ========================================

# Development Mode
DEBUG=false
DEVELOPMENT_MODE=false
HOT_RELOAD=false

# Testing
TEST_DATABASE_URL=postgresql://postgres:password@localhost:5432/slack_kb_agent_test
TEST_REDIS_URL=redis://localhost:6379/1
PYTEST_WORKERS=4

# Profiling
ENABLE_PROFILING=false
PROFILING_OUTPUT_DIR=./profiling

# ========================================
# DEPLOYMENT CONFIGURATION
# ========================================

# Environment
ENVIRONMENT=development

# Service Discovery
SERVICE_NAME=slack-kb-agent
SERVICE_VERSION=1.7.2
SERVICE_NAMESPACE=default

# Health Checks
STARTUP_TIMEOUT=60
SHUTDOWN_TIMEOUT=30
GRACEFUL_SHUTDOWN=true

# Resource Limits
MAX_MEMORY_MB=2048
MAX_CPU_CORES=2
MAX_DISK_GB=10

# ========================================
# FEATURE FLAGS
# ========================================

# Experimental Features
ENABLE_VECTOR_SEARCH=true
ENABLE_HYBRID_SEARCH=true
ENABLE_SEMANTIC_CACHING=true
ENABLE_SMART_ROUTING=true
ENABLE_REAL_TIME_LEARNING=false

# Integration Features
ENABLE_SLACK_THREADS=true
ENABLE_SLACK_REACTIONS=true
ENABLE_WEB_INTERFACE=false
ENABLE_MOBILE_PUSH=false